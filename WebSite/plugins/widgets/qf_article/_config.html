<div id="cat-config" style="display:none;"></div>
<div class="tableform widgetconfig">
    <div class="division">
        <table width="100%" border="0" cellspacing="0" cellpadding="0" id="showChange">
            <tr>
                <th width="20%">标签数：</th>
                <td width="80%">
                <select name="columNum" onChange="columsNum()" id="columNum">
                    <option value=1 <{if $setting.columNum==1}>selected<{/if}>>1</option>
                    <option value=2 <{if $setting.columNum==2}>selected<{/if}>>2</option>
                    <option value=3 <{if $setting.columNum==3}>selected<{/if}>>3</option>
                    <option value=4 <{if $setting.columNum==4}>selected<{/if}>>4</option>
                    <option value=5 <{if $setting.columNum==5}>selected<{/if}>>5</option>
                 </select>
                </td>
            </tr>
            <tr>
                <th width="20%">切换标签方式：</th>
                <td width="80%">
                	<select name="changeEffect"  id="changeEffect">
                       <option value=1 <{if $setting.changeEffect==1}>selected<{/if}>>点击</option>
                       <option value=2 <{if $setting.changeEffect==2}>selected<{/if}>>滑动</option>
                    </select>
                </td>
            </tr>
        </table>
   </div>
   
   <div class="division" id="devide1">     
        <table width="100%" cellpadding="0" cellspacing="0" >
        	<tr>
            	<td width="50">默认停留 <input type="radio" name="onSelect" value=0 <{if $setting.onSelect== 0}>checked<{/if}>></td>
                <td>
                	<table cellpadding="0" cellspacing="0">
                    <tr>
                        <th with="20%">列表说明：</th>
                        <td width="30%"><{input name="explain[0]" value=$setting.explain[0] size=10}></td>
                        <th width="20%">文章排序：</th>
                        <td width="30%">
                            <select name="order1" id="order1" vtype="required">
                                <option value="1" <{if $setting.order1=="1"}>selected="selected"<{/if}>>按发布时间升序</option>
                                <option value="2" <{if $setting.order1=="2"}>selected="selected"<{/if}>>按发布时间降序</option>
                                <option value="3" <{if $setting.order1=="3"}>selected="selected"<{/if}>>按浏览次数升序</option>
                                <option value="4" <{if $setting.order1=="4"}>selected="selected"<{/if}>>按浏览次数降序</option>
                            </select>
                         </td>
                     </tr>
                     <tr>
                        <th width="20%">选择文章分类</th>
                        <td width="80%" colspan="3">
                           <select name="id1[]" vtype="required" multiple="multiple" size="5">
                            <{foreach from=$data.cat item=cat key=key}>
                            <option value="<{$key}>" 
                                <{foreach from=$setting.id1 item=id1item}>
                                <{if $key eq $id1item}>selected="selected"<{/if}>
                                <{/foreach}>
                                ><{$cat}></option>
                            <{/foreach}>
                        </select>（按住Ctrl可多选）
                        </td>
                    </tr>
                	</table>
              </td>
            </tr>
         </table>
    </div>
    
     <div class="division" id="devide2">     
        <table width="100%" cellpadding="0" cellspacing="0" >
        	<tr>
            	<td width="50">默认停留 <input type="radio" name="onSelect" value=1 <{if $setting.onSelect== 1}>checked<{/if}>></td>
                <td>
                	<table cellpadding="0" cellspacing="0">
                    <tr>
                        <th with="20%">列表说明：</th>
                        <td width="30%"><{input name="explain[1]" value=$setting.explain[1] size=10}></td>
                        <th width="20%">文章排序：</th>
                        <td width="30%">
                            <select name="order2" id="order2" vtype="required">
                                <option value="1" <{if $setting.order2=="1"}>selected="selected"<{/if}>>按发布时间升序</option>
                                <option value="2" <{if $setting.order2=="2"}>selected="selected"<{/if}>>按发布时间降序</option>
                                <option value="3" <{if $setting.order2=="3"}>selected="selected"<{/if}>>按浏览次数升序</option>
                                <option value="4" <{if $setting.order2=="4"}>selected="selected"<{/if}>>按浏览次数降序</option>
                            </select>
                         </td>
                     </tr>
                     <tr>
                        <th width="20%">选择文章分类</th>
                        <td width="80%" colspan="3">
                           <select name="id2[]" vtype="required" multiple="multiple" size="5">
                            <{foreach from=$data.cat item=cat key=key}>
                            <option value="<{$key}>" <{if $key|in_array:$setting.id2}>selected="selected"<{/if}>><{$cat}></option>
                            <{/foreach}>
                        </select>（按住Ctrl可多选）
                        </td>
                    </tr>
                	</table>
              </td>
            </tr>
         </table>
    </div>
    
     <div class="division" id="devide3">     
        <table width="100%" cellpadding="0" cellspacing="0" >
        	<tr>
            	<td width="50">默认停留 <input type="radio" name="onSelect" value=2 <{if $setting.onSelect== 2}>checked<{/if}>></td>
                <td>
                	<table cellpadding="0" cellspacing="0">
                    <tr>
                        <th with="20%">列表说明：</th>
                        <td width="30%"><{input name="explain[2]" value=$setting.explain[2] size=10}></td>
                        <th width="20%">文章排序：</th>
                        <td width="30%">
                            <select name="order3" id="order3" vtype="required">
                                <option value="1" <{if $setting.order3=="1"}>selected="selected"<{/if}>>按发布时间升序</option>
                                <option value="2" <{if $setting.order3=="2"}>selected="selected"<{/if}>>按发布时间降序</option>
                                <option value="3" <{if $setting.order3=="3"}>selected="selected"<{/if}>>按浏览次数升序</option>
                                <option value="4" <{if $setting.order3=="4"}>selected="selected"<{/if}>>按浏览次数降序</option>
                            </select>
                         </td>
                     </tr>
                     <tr>
                        <th width="20%">选择文章分类</th>
                        <td width="80%" colspan="3">
                           <select name="id3[]" vtype="required" multiple="multiple" size="5">
                            <{foreach from=$data.cat item=cat key=key}>
                            <option value="<{$key}>" <{if $key|in_array:$setting.id3}>selected="selected"<{/if}>><{$cat}></option>
                            <{/foreach}>
                        </select>（按住Ctrl可多选）
                        </td>
                    </tr>
                	</table>
              </td>
            </tr>
         </table>
    </div>
    
     <div class="division" id="devide4">     
        <table width="100%" cellpadding="0" cellspacing="0" >
        	<tr>
            	<td width="50">默认停留 <input type="radio" name="onSelect" value=3 <{if $setting.onSelect== 3}>checked<{/if}>></td>
                <td>
                	<table cellpadding="0" cellspacing="0">
                    <tr>
                        <th with="20%">列表说明：</th>
                        <td width="30%"><{input name="explain[3]" value=$setting.explain[3] size=10}></td>
                        <th width="20%">文章排序：</th>
                        <td width="30%">
                            <select name="order4" id="order4" vtype="required">
                                <option value="1" <{if $setting.order4=="1"}>selected="selected"<{/if}>>按发布时间升序</option>
                                <option value="2" <{if $setting.order4=="2"}>selected="selected"<{/if}>>按发布时间降序</option>
                                <option value="3" <{if $setting.order4=="3"}>selected="selected"<{/if}>>按浏览次数升序</option>
                                <option value="4" <{if $setting.order4=="4"}>selected="selected"<{/if}>>按浏览次数降序</option>
                            </select>
                         </td>
                     </tr>
                     <tr>
                        <th width="20%">选择文章分类</th>
                        <td width="80%" colspan="3">
                           <select name="id4[]" vtype="required" multiple="multiple" size="5">
                            <{foreach from=$data.cat item=cat key=key}>
                            <option value="<{$key}>" <{if $key|in_array:$setting.id4}>selected="selected"<{/if}>><{$cat}></option>
                            <{/foreach}>
                        </select>（按住Ctrl可多选）
                        </td>
                    </tr>
                	</table>
              </td>
            </tr>
         </table>
    </div>
    
     <div class="division" id="devide5">     
        <table width="100%" cellpadding="0" cellspacing="0" >
        	<tr>
            	<td width="50">默认停留 <input type="radio" name="onSelect" value=4 <{if $setting.onSelect== 4}>checked<{/if}>></td>
                <td>
                	<table cellpadding="0" cellspacing="0">
                    <tr>
                        <th with="20%">列表说明：</th>
                        <td width="30%"><{input name="explain[4]" value=$setting.explain[4] size=10}></td>
                        <th width="20%">文章排序：</th>
                        <td width="30%">
                            <select name="order5" id="order5" vtype="required">
                                <option value="1" <{if $setting.order5=="1"}>selected="selected"<{/if}>>按发布时间升序</option>
                                <option value="2" <{if $setting.order5=="2"}>selected="selected"<{/if}>>按发布时间降序</option>
                                <option value="3" <{if $setting.order5=="3"}>selected="selected"<{/if}>>按浏览次数升序</option>
                                <option value="4" <{if $setting.order5=="4"}>selected="selected"<{/if}>>按浏览次数降序</option>
                            </select>
                         </td>
                     </tr>
                     <tr>
                        <th width="20%">选择文章分类</th>
                        <td width="80%" colspan="3">
                           <select name="id5[]" vtype="required" multiple="multiple" size="5">
                            <{foreach from=$data.cat item=cat key=key}>
                            <option value="<{$key}>" <{if $key|in_array:$setting.id5}>selected="selected"<{/if}>><{$cat}></option>
                            <{/foreach}>
                        </select>（按住Ctrl可多选）
                        </td>
                    </tr>
                	</table>
              </td>
            </tr>
         </table>
    </div>
            
    <div class="division">
        <table width="100%" border="0" cellspacing="0" cellpadding="0">
            <tr>
                <th width="20%">显示文章：</th>
                <td width="30%"><{input name="limit" value=$setting.limit|default:'5' vtype="required" type="digits" size=5}> 条</td>
                 
                 
                <th width="20%">显示小图标：</th>
                <td width="30%"><div id="showPic"></div><{input type="select" name="smallPic" id="smallPic" options=$data.arrow value=$setting.smallPic onClick="choosePic()"}> <div id="pic_add" style="display: none">
                图片地址： <{input name="picaddress" value=$setting.picaddress}> </div></td>
  
            </tr>
            <tr>
                <th width="20%">列数：</th>
                <td width="30%"><{input name="colums" value=$setting.colums|default:'1' vtype="required" type="digits" size=5}></td>
                <th width="20%">字符最长长度：</th>
                <td width="30%"><{input name="max_length" value=$setting.max_length|default:'35' vtype="required" type="digits" size=5}></td>
            </tr>
            <tr>
                <th width="20%">是否显示文章发布时间：</th>
                <td width="30%"><input type="radio" name="showdate" value="on" <{if $setting.showdate=="on"}>checked="checked"<{/if}> >是 <input type="radio" name="showdate" value="off" <{if $setting.showdate!="on"}>checked="checked"<{/if}>>否 </td>               
                <th width="20%">是否置顶优先：</th>
                <td width="30%"><input type="radio" name="iftop" value="on" <{if $setting.iftop=="on"}>checked="checked"<{/if}> >是 <input type="radio" name="iftop" value="off" <{if $setting.iftop!="on"}>checked="checked"<{/if}>>否 </td>
            </tr>
            <tr>
                <th width="20%">是否显示更多：</th>
                <td width="30%"><input type="radio" name="showMore" value="on" <{if $setting.showMore=="on"}>checked="checked"<{/if}> >是 <input type="radio" name="showMore" value="off" <{if $setting.showMore!="on"}>checked="checked"<{/if}>>否 
                <th width="20%"> </th>
                <td width="30%"> </td>
            </tr>
            <tr id="showTypePic">
                <th width="20%">是否显示分类图片：</th>
                <td width="30%"><input type="radio" name="showTitleImg" id="showTitleImg" value="on" <{if $setting.showTitleImg=="on"}>checked="checked"<{/if}> onClick="showTypePic(this.value)">是 <input type="radio" name="showTitleImg" id="showTitleImg" value="off" <{if $setting.showTitleImg!="on"}>checked="checked"<{/if}> onClick="showTypePic(this.value)">否 </td>
                 <th width="20%"> </th>
                <td width="30%"> </td>
            </tr>              
        </table>
    </div>
    
    <div class="division" id="showTitleImg-view" <{if $setting.showTitleImg!="on"}>style="display:none"<{/if}>>
        <h4>分类图片设置</h4>
        <table width="100%" border="0" cellspacing="0" cellpadding="0">
            <tr>
                <th>图片地址：</th>
                <td><{input name="titleImgSrc" value=$setting.titleImgSrc|default:''}> <span class='sysiconBtn addorder' onclick="addPic()">添加图片</span></td>
            </tr>
            <tr>
                <th>图片链接：</th>
                <td><{input name="titleImgHref" value=$setting.titleImgHref|default:''}> </td>
            </tr>
            <tr>
                <th>图片位置：</th>
                <td><select name="titleImgPosition">
                        <option value="top" <{if $setting.titleImgPosition=="top"}>selected="selected"<{/if}>>上方</option>
                        <option value="left" <{if $setting.titleImgPosition=="left"}>selected="selected"<{/if}>>左侧</option>
                        <option value="center" <{if $setting.titleImgPosition=="center"}>selected="selected"<{/if}>>中间</option>
                        <option value="right" <{if $setting.titleImgPosition=="right"}>selected="selected"<{/if}>>右侧</option>
                        <option value="bottom" <{if $setting.titleImgPosition=="bottom"}>selected="selected"<{/if}>>下方</option>
                    </select></td>
            </tr>
            <tr>
                <th>图片描述：</th>
                <td><{input name="titleImgAlt" value=$setting.titleImgAlt type="alphanum"}></td>
            </tr>
        </table>
    </div>
    <div class="division">
        <table width="100%" border="0" cellspacing="0" cellpadding="0">
            <tr id="showDescript">
                <th>显示分类描述：</th>
                <td><input type="radio" name="showTitle" id="showTitle" value="on" <{if $setting.showTitle=="on"}>checked="checked"<{/if}> onClick="checkShowType(this.value)">是 <input type="radio" name="showTitle" id="showTitle" value="off" <{if $setting.showTitle!="on"}>checked="checked"<{/if}> onClick="checkShowType(this.value)">否</td>
            </tr>
            <tr id="showTitle-view" <{if $setting.showTitle!="on"}>style="display:none"<{/if}>>
            	<th>分类描述：</th>
                <td><{input name="titleDesc" value=$setting.titleDesc}></td>
            </tr>
        </table>
    </div>   
    
    <div class="division" id="showintro" style="display:none;">
        <table width="100%" border="0" cellspacing="0" cellpadding="0">
            <tr>
                <th width="20%">滚动显示：</th>
                <td width="30%"><input type="radio" name="showScroll" value="on" <{if $setting.showScroll=="on"}>checked="checked"<{/if}> >是
                <input type="radio" name="showScroll" value="off" <{if $setting.showScroll!="on"}>checked="checked"<{/if}>>否 </td>
                <th width="20%">超过多少条滚动：</th>
                <td width="30%"><input name="scrollnum" value=<{$setting.scrollnum|default:'3'}> type="text"></td>
             </tr>
             <tr>
             	<th width="20%">滚动相隔时间：</th>
                <td width="30%"><input name="time" value=<{$setting.time|default:'3'}> type="text"></td>
                <th width="20%">简介截取字数：</th>
                <td width="30%"><input name="introcut" value=<{$setting.introcut|default:'42'}> type="text"></td>
            </tr>
            <tr>
             	<th width="20%">文章图片宽度：</th>
                <td width="30%"><input name="pictureWidth" value=<{$setting.pictureWidth|default:'60'}> type="text"></td>
                <th width="20%">文章图片高度：</th>
                <td width="30%"><input name="pictureHeight" value=<{$setting.pictureHeight|default:'60'}> type="text"></td>
            </tr>
        </table>
    </div>
</div>

<script>
function addPic(){
	return new Dialog('index.php?ctl=editor&act=image&p[0]=0',{title:'插入<img>',onShow:function(){
		var dialog=this;
		this.dialog.store('callback',function(src){
		  $('titleImgSrc').value=src;
		  dialog.close();
	   });
	}});
}

var offCheck1="off";
var offCheck2="off";
function checkShowType(vol){
  switch(vol){
    case 'off':
      $('showTitle-view').style.display='none';
      offCheck1="off";
    break;
    case 'on':
      $('showTitle-view').style.display='';
      offCheck1="on";
    break;
  }
}
function showTypePic(vol){
  switch(vol){
    case 'off':
      $('showTitleImg-view').style.display='none';
      offCheck2="off";
    break;
    case 'on':
      $('showTitleImg-view').style.display='';
      offCheck2="on";
    break;
  }
}
function columsNum(){  
  for(i=1;i<=5;i++){
    if(i<=$('columNum').value){
      
      $('devide'+i).style.display="";
    }else{
      $('devide'+i).style.display="none";
    }
  }

}

function getCfgForm(id){
  var config = $(id);
  while(config.tagName != 'FORM'){
    config = config.getParent();
  }
  return config;
}

function getWgtTpl(){
  var sels = getCfgForm('cat-config').getElements('select');
  var wgtTpl = '';
  sels.each(function(sel){
    if(sel.getProperty('name') == '__wg[tpl]') wgtTpl = sel;
  });
  return wgtTpl;
}

function setToggler(togglers){
  togglers.each(function(toggler){
    var view = toggler.getProperty('name')+'-view';
    toggler.addEvent('click',function(){
      if(this.value=="on"){
        $(view).show();
      }else{
        $(view).hide();
      }
    });
  });
}

function onRest(){
  $('columNum').selectedIndex=0;
  $('showChange').style.display="none";
  $('devide1').style.display="none";
  columsNum();
}
function setCfgView(view){
  switch(view){
	case 'div_scroll.html':
	case 'influence.html':
    $('showTitleImg-view').style.display="none";
    $('showTitle-view').style.display="none";
    $('showTypePic').style.display="none";
    $('showDescript').style.display="none";
	$('showintro').style.display="";	
    break;
	case 'list_hot.html':
    $('showTitleImg-view').style.display="none";
    $('showTitle-view').style.display="none";
    $('showTypePic').style.display="none";
    $('showDescript').style.display="none";
	$('showintro').style.display="none";
    case 'multi_list.html':
    onRest();
    $('showTitleImg-view').style.display="none";
    $('showTitle-view').style.display="none";
    $('showTypePic').style.display="none";
    $('showDescript').style.display="none";
	$('showintro').style.display="none"
    break;
    case 'div_list.html':
    $('showChange').style.display="";
    $('devide1').style.display="";
    $('showTitleImg-view').style.display="none";
    $('showTitle-view').style.display="none";
    $('showTypePic').style.display="none";
    $('showDescript').style.display="none";
	$('showintro').style.display="none";	
    break;
	case 'default.html':
    $('showTypePic').style.display="";
    $('showDescript').style.display="";
	$('showintro').style.display="none";
    onRest();
    break;
  }
}


var catTpl = getWgtTpl();
setCfgView(catTpl.value);

catTpl.addEvent('change',function(){
  setCfgView(this.value);
});



choosePic=function(){
  var vol=$('smallPic').value;
  $('pic_add').style.display="none";
  switch(vol){
    case '6':
    $('pic_add').style.display="";
    $('showPic').innerHTML="";
    
    break;
    default:
    $('showPic').innerHTML="<img src='../statics/icons/"+vol+"'>";
    break;
  }
}
choosePic();
columsNum();
</script>